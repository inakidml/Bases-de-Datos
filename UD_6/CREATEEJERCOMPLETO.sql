CREATE TABLE ARTICULOS(
	ARTICULO 	VARCHAR2(20) ,	
	COD_FABRICANTE 	VARCHAR2(3) NOT NULL CONSTRAINT ART_COD_FK REFERENCES FABRICANTES, 
	PESO NUMBER(4) CONSTRAINT ART_PES_CK CHECK (PESO >0), 
	CATEGORIA 	VARCHAR2(20)  CONSTRAINT ART_CAT_CK  CHECK (CATEGORIA IN('PRIMERA','SEGUNDA','TERCERA')),
   	PRECIO_VENTA 	NUMBER(4)   CONSTRAINT ART_pre_CK CHECK (PRECIO_VENTA >0),  
	EXISTENCIAS NUMBER(5),
	CONSTRAINT ART_ACPC_PK PRIMARY KEY(articulo, cod_fabricante, peso, categoria));


CREATE TABLE TIENDAS(
	NIF 	VARCHAR2(10) CONSTRAINT TIE_NIF_PK PRIMARY KEY ,	
	NOMBRE 	VARCHAR2(20)  CONSTRAINT 	TIE_NOM_CK  CHECK (NOMBRE=UPPER(NOMBRE)),
	DIRECCION VARCHAR2(20), 
	POBLACION VARCHAR2(20),
	PROVINCIA VARCHAR2(20),
	CODPOSTAL VARCHAR2(5));


CREATE TABLE FABRICANTES(
	COD_FABRICANTE 	VARCHAR2(10) CONSTRAINT FAB_COD_PK PRIMARY KEY ,	
	NOMBRE 	VARCHAR2(15)  CONSTRAINT 	FAB_NOM_CK  CHECK (NOMBRE=UPPER(NOMBRE)),
	PAIS VARCHAR2(15) CONSTRAINT 	FAB_PAI_CK  CHECK (PAIS=UPPER(PAIS)));

CREATE TABLE PEDIDOS(
	NIF VARCHAR2(10) ,
	ARTICULO 	VARCHAR2(20) ,	
	COD_FABRICANTE 	VARCHAR2(3) NOT NULL  CONSTRAINT PED_COD2_FK REFErENCES FABRICANTES, 
	PESO NUMBER(4) CONSTRAINT PED_PES_CK CHECK (PESO >0) , 
	CATEGORIA 	VARCHAR2(20)  CONSTRAINT PED_CAT_CK  CHECK (CATEGORIA IN('PRIMERA','SEGUNDA','TERCERA')),
   	FECHA_PEDIDO DATE NOT NULL,  
	UNIDADES_PEDIDAS NUMBER(4) CONSTRAINT ART_UNI_CK CHECK (UNIDADES_PEDIDAS >0) ,
	CONSTRAINT ART_NACPCf_PK PRIMARY KEY(nif,articulo, cod_fabricante, peso, categoria,fecha_pedido));



alter table pedidos
add constraint ped_for_ref foreign key(articulo,cod_fabricante,peso,categoria) references articulos(articulo,cod_fabricante,peso,categoria);


2.
INSERT INTO ARTICULOS VALUES('Pantalla LCD','010',750,'PRIMERA',342,48)
INSERT INTO ARTICULOS VALUES('Raton','015',230,'SEGUNDA',15,32)
INSERT INTO ARTICULOS VALUES ('Altavoces','010',400,'PRIMERA',70,8)
INSERT INTO ARTICULOS VALUES ('Impresora','015',2750,'PRIMERA',110,13)

INSERT INTO TIENDAS VALUES('C-340','BEEP','Gran Via,32','madrid','MADRID',08010)
INSERT INTO TIENDAS VALUES('C-545','FNAC','Avda. Reyes,45','Bilbao','BIZKAIA',48080)
INSERT INTO TIENDAS VALUES('C-841','ALGITECH','Rios Bravos 51','Logroño','LA RIOJA',41030)
INSERT INTO TIENDAS VALUES('TO-123','ALGITECH','Rios Bravos 51','Logroño','TOLEDO',41030)

INSERT INTO FABRICANTES VALUES('010','TOSHIBA','JAPON')
INSERT INTO FABRICANTES VALUES('015','HP','ALEMANIA')
INSERT INTO FABRICANTES VALUES('033','SAMSUNG','COREA')

INSERT INTO PEDIDOS VALUES('C-545','Impresora','015',2750,'PRIMERA','2/1/2013',10)
INSERT INTO PEDIDOS VALUES('C-841','Impresora','015',2750,'PRIMERA','4/3/2013',5)
INSERT INTO PEDIDOS VALUES('C-340','Raton','015',230,'SEGUNDA','5/1/2013',23)